<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draggable Balls</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }
        canvas {
            border: 2px solid #333;
            background-color: white;
            cursor: grab;
        }
        canvas:active {
            cursor: grabbing;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = 800;
        canvas.height = 600;
        
        class Ball {
            constructor(x, y, radius, vx, vy, color) {
                this.x = x;
                this.y = y;
                this.radius = radius;
                this.vx = vx;
                this.vy = vy;
                this.color = color;
                this.isDragging = false;
                this.dragOffsetX = 0;
                this.dragOffsetY = 0;
            }
            
            update() {
                if (this.isDragging) return;
                
                // Apply gravity
                this.vy += 0.3;
                
                this.x += this.vx;
                this.y += this.vy;
                
                // Bounce off walls
                if (this.x - this.radius < 0 || this.x + this.radius > canvas.width) {
                    this.vx = -this.vx * 0.8;
                    this.x = Math.max(this.radius, Math.min(canvas.width - this.radius, this.x));
                }
                
                if (this.y + this.radius > canvas.height) {
                    this.vy = -this.vy * 0.8;
                    this.y = canvas.height - this.radius;
                }
                
                // Stop if very slow
                if (Math.abs(this.vx) < 0.1) this.vx = 0;
                if (Math.abs(this.vy) < 0.1) this.vy = 0;
            }
            
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 2;
                ctx.stroke();
            }
            
            isPointInside(px, py) {
                const dx = px - this.x;
                const dy = py - this.y;
                return dx * dx + dy * dy <= this.radius * this.radius;
            }
            
            startDrag(px, py) {
                this.isDragging = true;
                this.dragOffsetX = px - this.x;
                this.dragOffsetY = py - this.y;
                this.vx = 0;
                this.vy = 0;
            }
            
            drag(px, py) {
                if (this.isDragging) {
                    this.x = px - this.dragOffsetX;
                    this.y = py - this.dragOffsetY;
                }
            }
            
            endDrag() {
                this.isDragging = false;
            }
        }
        
        const balls = [];
        const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E2'];
        
        // Create balls with radius 6-10
        for (let i = 0; i < 8; i++) {
            const radius = Math.random() * 4 + 6; // 6-10
            const ball = new Ball(
                Math.random() * (canvas.width - radius * 2) + radius,
                Math.random() * (canvas.height * 0.5),
                radius,
                (Math.random() - 0.5) * 4,
                0,
                colors[i]
            );
            balls.push(ball);
        }
        
        let draggedBall = null;
        
        // Mouse events for dragging
        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            const px = e.clientX - rect.left;
            const py = e.clientY - rect.top;
            
            // Check from last ball to first (reverse order for top ball priority)
            for (let i = balls.length - 1; i >= 0; i--) {
                if (balls[i].isPointInside(px, py)) {
                    draggedBall = balls[i];
                    draggedBall.startDrag(px, py);
                    break;
                }
            }
        });
        
        canvas.addEventListener('mousemove', (e) => {
            if (draggedBall) {
                const rect = canvas.getBoundingClientRect();
                const px = e.clientX - rect.left;
                const py = e.clientY - rect.top;
                draggedBall.drag(px, py);
            }
        });
        
        canvas.addEventListener('mouseup', () => {
            if (draggedBall) {
                draggedBall.endDrag();
                draggedBall = null;
            }
        });
        
        canvas.addEventListener('mouseleave', () => {
            if (draggedBall) {
                draggedBall.endDrag();
                draggedBall = null;
            }
        });
        
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            for (let ball of balls) {
                ball.update();
                ball.draw();
            }
            
            requestAnimationFrame(animate);
        }
        
        animate();
    </script>
</body>
</html>